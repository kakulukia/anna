{% extends 'inc/dashboard_base.html' %}
{% load static %}
{% load django_bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_messages %}
{% bootstrap_javascript %}
{% block title %}Termine{% endblock title %}
{% block content %}
  <div class="container">
    <div class="px-3">
      <h1 class="h2 my-5">Termine</h1>

      {% if appointments %}
        {{ appointments.0.name }}<br>
        <br>
        <div class="row justify-content-start">
          <div class="col-md-9">
            {{ appointments.0.description }}<br>
            <br>
            <span class="badge appointment-details"><i class="icon material-icons">calendar_month</i>{{ appointments.0.date }}</span>
            <span class="badge appointment-details"><i class="icon material-icons">schedule</i>{{ appointments.0.start_time }}</span><br>
            <br>
          </div>
            <div class="col-md-3 text-md-end">
              <div class="d-grid gap-2 d-md-block">
                <button class="btn btn-primary px-3" type="button">Zum Meeting</button>
              </div>
            </div>
          </div>
        {% else %}
          Im Moment gibt es keine aktuellen Termine. <br>
          Wir arbeiten aber schon an neuen Angeboten f√ºr Euch!
        {% endif %}
    </div>
    <div class="px-3 my-5">

      {% if appointments %}
        <div class="accordion" id="accordionExample">
        {% for appointment in appointments %}
          {% ifchanged appointment.date.month %}
            {% if not forloop.first %}
                </div>
              </div>
            </div>
            {% endif %}

            <div class="accordion-item">
              <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#M{{ appointment.date.month }}{{ appointment.date.year }}" aria-expanded="false" aria-controls="collapseTwo">
                  <h4>{{ appointment.date | date:"F" }}</h4>
                </button>
              </h2>
              <div id="M{{ appointment.date.month }}{{ appointment.date.year }}" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                <div class="accordion-body">

          {% endifchanged %}

          <p>{{ appointment.date | date:"d.m." }} - {{ appointment.name }}</p>
          {% if forloop.last %}
                </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}

        </div>
      {% endif %}
    </div>
  </div>
{% endblock content %}
